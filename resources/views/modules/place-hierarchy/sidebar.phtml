<?php

use Fisharebest\Webtrees\Family;
use Fisharebest\Webtrees\I18N;
use Fisharebest\Webtrees\Individual;
use Fisharebest\Webtrees\Location;
use Fisharebest\Webtrees\Place;

/**
 * @var bool                 $showlink
 * @var Place                $place
 * @var int                  $id
 * @var string               $sidebar_class
 * @var int                  $num_children
 * @var array<string,string> $stats
 */
?>

<li class="gchart px-md-2 <?= $sidebar_class ?>" data-wt-feature-id="<?= $id ?>">
    <div class="row label">
        <div class="col" style="word-wrap: break-word">
            <?php if ($sidebar_class === 'mapped' && $num_children > 0) : ?>
                <a href="<?= e($place->url()) ?>">
                    <?= $place->placeName() ?>
                </a>
            <?php else : ?>
                <?= $place->placeName() ?>
            <?php endif ?>
            <?php if($geo_link !== '') : ?>
              <a class="ms-1" href="<?= e($geo_link)?>" title = "<?= I18N::translate('Edit map co-ordinates') ?>">
                <?= view('icons/map') ?>
              </a>
          <?php endif ?>
        </div>
    </div>

    <?php if ($sidebar_class === 'unmapped') : ?>
        <div class="row">
            <div class="col-sm-9"><?= I18N::translate('The location of this place is not known.') ?></div>
            <div class="col-sm-3 text-end"><?= view('icons/warning') ?></div>
        </div>
    <?php endif ?>

    <div class="row">
        <div class="col-sm-9"><?= I18N::translate('Subordinate Places') ?></div>
        <div class="col-sm-3 text-end"><?= I18N::number($num_children) ?></div>
    </div>

    <div class="row">
        <div class="col-sm-9"><?= I18N::translate('Individuals') ?></div>
        <div class="col-sm-3 text-end"><?= I18N::number($stats[Individual::RECORD_TYPE]) ?></div>
    </div>

    <?php if ($stats[Family::RECORD_TYPE] > 0): ?>
        <div class="row">
            <div class="col-sm-9"><?= I18N::translate('Families') ?></div>
            <div class="col-sm-3 text-end"><?= I18N::number($stats[Family::RECORD_TYPE]) ?></div>
        </div>
    <?php endif ?>

    <?php if ($stats[Location::RECORD_TYPE] > 0): ?>
        <div class="row">
            <div class="col-sm-9"><?= I18N::translate('Locations') ?></div>
            <div class="col-sm-3 text-end"><?= I18N::number($stats[Location::RECORD_TYPE]) ?></div>
        </div>
    <?php endif ?>
</li>
