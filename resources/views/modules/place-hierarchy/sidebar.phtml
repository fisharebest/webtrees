<?php

use Fisharebest\Webtrees\Family;
use Fisharebest\Webtrees\I18N;
use Fisharebest\Webtrees\Individual;
use Fisharebest\Webtrees\Location;
use Fisharebest\Webtrees\Place;

/**
 * @var bool                 $showlink
 * @var Place                $place
 * @var int                  $id
 * @var string               $sidebar_class
 * @var int                  $num_children
 * @var array<string,string> $stats
 */
?>

<li class="gchart px-md-2 <?= $sidebar_class ?>" data-wt-feature-id="<?= $id ?>">
  <table class="table table-borderless">
    <?php if ($sidebar_class === 'unmapped') : ?>
        <tr>
          <th scope="row" class="text-danger p-0"><?= I18N::translate('The location of this place is not known.') ?></th>
          <td class="p-0 align-digits"><?= view('icons/warning') ?></td>
        </tr>
    <?php endif ?>
    <tr>
      <th scope="row" class="p-0">
        <span class="label">
          <?php if ($sidebar_class === 'mapped' && $num_children > 0) : ?>
            <a href="<?= e($place->url()) ?>"><?= $place->placeName() ?></a>
          <?php else : ?>
            <?= $place->placeName() ?>
          <?php endif ?>
        </span>
      </th>
        <?php if($geo_link !== '') : ?>
        <td class="p-0 align-digits">
          <a class="ms-1" href="<?= e($geo_link)?>" title = "<?= I18N::translate('Add or edit place co-ordinates') ?>">
            <?= view('icons/map') ?>
          </a>
        </td>
      <?php endif ?>
    </tr>
    <tr>
      <th scope="row" class="p-0"><?= I18N::translate('Subordinate Places') ?></th>
      <td class="p-0 align-digits"><?= I18N::number($num_children) ?></td>
    </tr>
    <tr>
      <th scope="row" class="p-0"><?= I18N::translate('Individuals') ?></th>
      <td class="p-0 align-digits"><?= I18N::number($stats[Individual::RECORD_TYPE]) ?></td>
    </tr>
    <tr>
      <th scope="row" class="p-0"><?= I18N::translate('Families') ?></th>
      <td class="p-0 align-digits"><?= I18N::number($stats[Family::RECORD_TYPE]) ?></td>
    </tr>
    <?php if ($stats[Location::RECORD_TYPE] > 0): ?>
      <tr>
        <th scope="row" class="p-0"><?= I18N::translate('Locations') ?></th>
        <td class="p-0 align-digits"><?= I18N::number($stats[Location::RECORD_TYPE]) ?></td>
      </tr>
    <?php endif ?>
  </table>
</li>
